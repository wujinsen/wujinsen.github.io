(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{401:function(t,s,e){t.exports=e.p+"assets/img/img_1.bcf82e5c.png"},402:function(t,s,e){t.exports=e.p+"assets/img/img_2.e62712da.png"},403:function(t,s,e){t.exports=e.p+"assets/img/img.c20687dc.png"},404:function(t,s,e){t.exports=e.p+"assets/img/img_3.16ecd24d.png"},405:function(t,s,e){t.exports=e.p+"assets/img/img_4.35637008.png"},406:function(t,s,e){t.exports=e.p+"assets/img/img_5.143ce5e5.png"},444:function(t,s,e){"use strict";e.r(s);var a=e(56),n=Object(a.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"jenkins部署教程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jenkins部署教程"}},[t._v("#")]),t._v(" Jenkins部署教程")]),t._v(" "),a("p",[t._v("机器ip: 121.89.243.115 用户: develop")]),t._v(" "),a("h3",{attrs:{id:"_1-安装jenkins"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-安装jenkins"}},[t._v("#")]),t._v(" 1.安装Jenkins")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("\nwget -O /etc/yum.repos.d/jenkins.repo http://pkg.jenkins-ci.org/redhat/jenkins.repo\nrpm --import https://jenkins-ci.org/redhat/jenkins-ci.org.key\n\nyum install -y jenkins --nogpgcheck   注: --nogpgcheck 跳过公钥检查\n\n")])])]),a("h3",{attrs:{id:"_2-修改端口号-修改jenkins用户权限"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-修改端口号-修改jenkins用户权限"}},[t._v("#")]),t._v(" 2.修改端口号，修改jenkins用户权限")]),t._v(" "),a("p",[t._v("vi /etc/sysconfig/jenkins\n找到8080修改为对应端口号即可")]),t._v(" "),a("p",[t._v("修改jenkins用户权限:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('sudo vim /etc/sysconfig/jenkins\nJENKINS_USER="root"\nsudo chown -R root:root /usr/lib/jenkins\n')])])]),a("p",[t._v("启动:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("service jenkins start/stop/restart\n")])])]),a("h3",{attrs:{id:"_3-登录页面"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-登录页面"}},[t._v("#")]),t._v(" 3.登录页面")]),t._v(" "),a("p",[t._v("初始密码:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("sudo cat /var/lib/jenkins/secrets/initialAdminPassword\n")])])]),a("p",[t._v("aa0910dc2d9a405fac2f6155b3e64197")]),t._v(" "),a("h3",{attrs:{id:"_4-汉化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-汉化"}},[t._v("#")]),t._v(" 4.汉化")]),t._v(" "),a("p",[a("img",{attrs:{src:e(401),alt:""}})]),t._v(" "),a("p",[t._v("中文插件")]),t._v(" "),a("h3",{attrs:{id:"_5-安装各种插件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-安装各种插件"}},[t._v("#")]),t._v(" 5.安装各种插件")]),t._v(" "),a("p",[t._v("安装插件 ( 安装过程可能会失败,多试几次就好了 )")]),t._v(" "),a("p",[t._v("Git Parameter ( 用于参数化构建中动态获取项目分支 )")]),t._v(" "),a("p",[t._v("Generic Webhook Trigger ( 用于解析 Webhook 传过来的参数 )")]),t._v(" "),a("p",[t._v("GitLab ( 用于推送构建结果给 GitLab )")]),t._v(" "),a("h3",{attrs:{id:"_6-jenkins-配置git"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-jenkins-配置git"}},[t._v("#")]),t._v(" 6.jenkins 配置Git")]),t._v(" "),a("p",[t._v("卸载机器原有git，重新安装git\n"),a("img",{attrs:{src:e(402),alt:""}})]),t._v(" "),a("h3",{attrs:{id:"_7-jenkins创建项目并配置git"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-jenkins创建项目并配置git"}},[t._v("#")]),t._v(" 7. jenkins创建项目并配置git")]),t._v(" "),a("p",[t._v("git仓库无论是gitlab还是本地git，都通用")]),t._v(" "),a("ul",[a("li",[t._v("gitlab:")])]),t._v(" "),a("p",[t._v("项目添加(jenkins所在机器)机器的公钥，并在机器上git clone能否免密检出项目")]),t._v(" "),a("ul",[a("li",[t._v("git本地仓库:")])]),t._v(" "),a("p",[t._v("git init 创建本地仓库\n/opt/.ssh/ 目录下，把公钥加入 authorized_keys, 并在机器上git clone看能否免密检出项目")]),t._v(" "),a("h3",{attrs:{id:"_8-jenkins配置全局凭据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-jenkins配置全局凭据"}},[t._v("#")]),t._v(" 8.Jenkins配置全局凭据:")]),t._v(" "),a("p",[a("img",{attrs:{src:e(403),alt:""}})]),t._v(" "),a("p",[t._v("选择 SSH Username with private key 方式配置")]),t._v(" "),a("p",[t._v("username: develop")]),t._v(" "),a("p",[t._v("Private Key: /opt/.ssh/id_rsa")]),t._v(" "),a("p",[t._v("gitlab<--\x3ejenkins<--\x3e 服务器之间就能打通了")]),t._v(" "),a("h3",{attrs:{id:"_9-maven配置及config插件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_9-maven配置及config插件"}},[t._v("#")]),t._v(" 9.maven配置及config插件")]),t._v(" "),a("ul",[a("li",[t._v("9.1 jenkins添加maven配置")])]),t._v(" "),a("p",[a("img",{attrs:{src:e(404),alt:""}})]),t._v(" "),a("ul",[a("li",[t._v("9.2 下载config插件，配置maven setting.xml文件")])]),t._v(" "),a("p",[a("img",{attrs:{src:e(405),alt:""}}),t._v(" "),a("img",{attrs:{src:e(406),alt:""}})]),t._v(" "),a("ul",[a("li",[t._v("项目发布脚本:")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("\ncp /var/lib/jenkins/workspace/moli-project.jar /opt/project/moli-project\n/opt/project/moli-project/startup.sh restart\n\n")])])]),a("ul",[a("li",[t._v("moli-dev发布脚本:")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('node -v\nnpm -v\nwebPath=/opt/project/moli-web/\nnpm install\nnpm run build\nzip -q -r dist.zip dist/m\nsudo cp dist.zip $webPath\nif [[ ! -d "$webPath/dist" ]]; then\n echo "文件夹不存在"\nelse\n echo "文件夹存在"\n # 备份dist\n sudo rm -rf $webPath/dist\nfi\nsudo cp -r dist/ $webPath\n')])])])])}),[],!1,null,null,null);s.default=n.exports}}]);