(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{416:function(t,n,s){"use strict";s.r(n);var e=s(56),v=Object(e.a)({},(function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"云服务器病毒"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#云服务器病毒"}},[t._v("#")]),t._v(" 云服务器病毒")]),t._v(" "),s("p",[t._v("记录一下服务器中过的木马病毒——kdevtmpfsi  kthreadd\n这是一个挖矿病毒，通过我docker的redis进入的，一开始没设置密码的隐患啊。\n应该配置好密码，做好端口映射，别傻乎乎的用默认的主机端口~")]),t._v(" "),s("ol",[s("li",[t._v("先将相应木马文件删除")])]),t._v(" "),s("p",[t._v("sudo find / -name kdevtmpfsi*\nsudo rm -rf ...")]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[t._v("再将守护进程的文件删除")])]),t._v(" "),s("p",[t._v("sudo find / -name kinsing*\nsudo rm -rf ...")]),t._v(" "),s("ol",{attrs:{start:"3"}},[s("li",[t._v("杀死进程")])]),t._v(" "),s("p",[t._v("ps -aux | grep kinsing")]),t._v(" "),s("p",[t._v("sudo kill -9 PID")]),t._v(" "),s("p",[t._v("ps -aux | grep kdevtmpfsi")]),t._v(" "),s("p",[t._v("sudo kill -9 PID")]),t._v(" "),s("ol",{attrs:{start:"4"}},[s("li",[t._v("netstat -ltnp命令查看奇怪的字母数字监听端口，杀掉该进程")])]),t._v(" "),s("p",[t._v("ls -l /proc/30902/exe")]),t._v(" "),s("p",[t._v("我的定时任务里倒是没发现有什么问题\n不过可以检查一下\ncrontab -l\ncrontab -e 删除定时任务")]),t._v(" "),s("p",[t._v("还有/etc/rc.local以及/etc/init.d都检查一遍\n最后修改云服务器密码，做好安全。")]),t._v(" "),s("ul",[s("li",[t._v("中毒的可能原因：")])]),t._v(" "),s("p",[t._v("使用破解版的confluence，试过多个版本的confluence破解，依然被入侵。\n密码太简单。服务器上的各种软件，比如mysql,redis, jenkins,gitlab等，密码太简单容易被入侵。\n对外开放太多端口号。开启防火墙，只开放使用的端口号。")])])}),[],!1,null,null,null);n.default=v.exports}}]);